<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">

	<title>js - SDKBOX文档</title>

        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../../css/highlight.css">
        <link href="../../../css/custom.css" rel="stylesheet">


        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-70044300-2', 'docs.sdkbox.com/zh');
            ga('send', 'pageview');
        </script>
        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="http://sdkbox.com"><img src="http://www.cocos2d-x.org/s/sdkbox/SDKBOX_logo.png"></a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../../..">介绍</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../../installer/">安装器</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">插件 <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">AdColony</a>
    <ul class="dropdown-menu">
        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cocos2dx 3.x</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../adcolony/v3-cpp/">c++</a>
</li>

        
            
<li >
    <a href="../../adcolony/v3-js/">js</a>
</li>

        
            
<li >
    <a href="../../adcolony/v3-lua/">lua</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cocos2dx 2.x</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../adcolony/v2-cpp/">c++</a>
</li>

        
            
<li >
    <a href="../../adcolony/v2-js/">js</a>
</li>

        
            
<li >
    <a href="../../adcolony/v2-lua/">lua</a>
</li>

        
    </ul>
  </li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">AgeCheq</a>
    <ul class="dropdown-menu">
        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cocos2dx 3.x</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../agecheq/v3-cpp/">c++</a>
</li>

        
            
<li >
    <a href="../../agecheq/v3-js/">js</a>
</li>

        
            
<li >
    <a href="../../agecheq/v3-lua/">lua</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cocos2dx 2.x</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../agecheq/v2-cpp/">c++</a>
</li>

        
            
<li >
    <a href="../../agecheq/v2-js/">js</a>
</li>

        
            
<li >
    <a href="../../agecheq/v2-lua/">lua</a>
</li>

        
    </ul>
  </li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Chartboost</a>
    <ul class="dropdown-menu">
        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cocos2dx 3.x</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../chartboost/v3-cpp/">c++</a>
</li>

        
            
<li >
    <a href="../../chartboost/v3-js/">js</a>
</li>

        
            
<li >
    <a href="../../chartboost/v3-lua/">lua</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cocos2dx 2.x</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../chartboost/v2-cpp/">c++</a>
</li>

        
            
<li >
    <a href="../../chartboost/v2-js/">js</a>
</li>

        
            
<li >
    <a href="../../chartboost/v2-lua/">lua</a>
</li>

        
    </ul>
  </li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Facebook</a>
    <ul class="dropdown-menu">
        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cocos2dx 3.x</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../facebook/v3-cpp/">c++</a>
</li>

        
            
<li >
    <a href="../../facebook/v3-js/">js</a>
</li>

        
            
<li >
    <a href="../../facebook/v3-lua/">lua</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cocos2dx 2.x</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../facebook/v2-cpp/">c++</a>
</li>

        
            
<li >
    <a href="../../facebook/v2-js/">js</a>
</li>

        
            
<li >
    <a href="../../facebook/v2-lua/">lua</a>
</li>

        
    </ul>
  </li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Flurry Analytics</a>
    <ul class="dropdown-menu">
        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cocos2dx 3.x</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../flurryanalytics/v3-cpp/">c++</a>
</li>

        
            
<li >
    <a href="../../flurryanalytics/v3-js/">js</a>
</li>

        
            
<li >
    <a href="../../flurryanalytics/v3-lua/">lua</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cocos2dx 2.x</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../flurryanalytics/v2-cpp/">c++</a>
</li>

        
            
<li >
    <a href="../../flurryanalytics/v2-js/">js</a>
</li>

        
            
<li >
    <a href="../../flurryanalytics/v2-lua/">lua</a>
</li>

        
    </ul>
  </li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Google Analytics</a>
    <ul class="dropdown-menu">
        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cocos2dx 3.x</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../googleanalytics/v3-cpp/">c++</a>
</li>

        
            
<li >
    <a href="../../googleanalytics/v3-js/">js</a>
</li>

        
            
<li >
    <a href="../../googleanalytics/v3-lua/">lua</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cocos2dx 2.x</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../googleanalytics/v2-cpp/">c++</a>
</li>

        
            
<li >
    <a href="../../googleanalytics/v2-js/">js</a>
</li>

        
            
<li >
    <a href="../../googleanalytics/v2-lua/">lua</a>
</li>

        
    </ul>
  </li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">IAP</a>
    <ul class="dropdown-menu">
        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cocos2dx 3.x</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../iap/v3-cpp/">c++</a>
</li>

        
            
<li >
    <a href="../../iap/v3-js/">js</a>
</li>

        
            
<li >
    <a href="../../iap/v3-lua/">lua</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cocos2dx 2.x</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../iap/v2-cpp/">c++</a>
</li>

        
            
<li >
    <a href="../../iap/v2-js/">js</a>
</li>

        
            
<li >
    <a href="../../iap/v2-lua/">lua</a>
</li>

        
    </ul>
  </li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Kochava</a>
    <ul class="dropdown-menu">
        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cocos2dx 3.x</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../kochava/v3-cpp/">c++</a>
</li>

        
            
<li >
    <a href="../../kochava/v3-js/">js</a>
</li>

        
            
<li >
    <a href="../../kochava/v3-lua/">lua</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cocos2dx 2.x</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../kochava/v2-cpp/">c++</a>
</li>

        
            
<li >
    <a href="../../kochava/v2-js/">js</a>
</li>

        
            
<li >
    <a href="../../kochava/v2-lua/">lua</a>
</li>

        
    </ul>
  </li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Ratings & Reviews</a>
    <ul class="dropdown-menu">
        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cocos2dx 3.x</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../v3-cpp/">c++</a>
</li>

        
            
<li >
    <a href="../v3-js/">js</a>
</li>

        
            
<li >
    <a href="../v3-lua/">lua</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cocos2dx 2.x</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../v2-cpp/">c++</a>
</li>

        
            
<li class="active">
    <a href="./">js</a>
</li>

        
            
<li >
    <a href="../v2-lua/">lua</a>
</li>

        
    </ul>
  </li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">SoomlaGrow</a>
    <ul class="dropdown-menu">
        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cocos2dx 3.x</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../soomlagrow/v3-cpp/">c++</a>
</li>

        
            
<li >
    <a href="../../soomlagrow/v3-js/">js</a>
</li>

        
            
<li >
    <a href="../../soomlagrow/v3-lua/">lua</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cocos2dx 2.x</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../soomlagrow/v2-cpp/">c++</a>
</li>

        
            
<li >
    <a href="../../soomlagrow/v2-js/">js</a>
</li>

        
            
<li >
    <a href="../../soomlagrow/v2-lua/">lua</a>
</li>

        
    </ul>
  </li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Tune</a>
    <ul class="dropdown-menu">
        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cocos2dx 3.x</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../tune/v3-cpp/">c++</a>
</li>

        
            
<li >
    <a href="../../tune/v3-js/">js</a>
</li>

        
            
<li >
    <a href="../../tune/v3-lua/">lua</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cocos2dx 2.x</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../tune/v2-cpp/">c++</a>
</li>

        
            
<li >
    <a href="../../tune/v2-js/">js</a>
</li>

        
            
<li >
    <a href="../../tune/v2-lua/">lua</a>
</li>

        
    </ul>
  </li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Vungle</a>
    <ul class="dropdown-menu">
        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cocos2dx 3.x</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../vungle/v3-cpp/">c++</a>
</li>

        
            
<li >
    <a href="../../vungle/v3-js/">js</a>
</li>

        
            
<li >
    <a href="../../vungle/v3-lua/">lua</a>
</li>

        
    </ul>
  </li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cocos2dx 2.x</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../vungle/v2-cpp/">c++</a>
</li>

        
            
<li >
    <a href="../../vungle/v2-js/">js</a>
</li>

        
            
<li >
    <a href="../../vungle/v2-lua/">lua</a>
</li>

        
    </ul>
  </li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../../../release-note/">关于</a>
                    </li>
                
                

                    <!-- new add for language button -->
                    <li>
                        <a href="http://sdkbox-doc.github.io/en/">English</a>
                    </li>
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                
                    <li >
                        <a rel="next" href="../v2-cpp/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../v2-lua/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#review">Review</a></li>
        
            <li><a href="#_1">集成</a></li>
        
            <li><a href="#android">Android 的额外步骤</a></li>
        
            <li><a href="#_2">配置</a></li>
        
            <li><a href="#_3">用法</a></li>
        
            <li><a href="#api-reference">API Reference</a></li>
        
            <li><a href="#_4">手动集成</a></li>
        
            <li><a href="#ios">iOS 手动集成步骤</a></li>
        
            <li><a href="#android_1">Android 手动集成步骤.</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<!--
Include Base: /Users/jtsm/Chukong-Inc/pr/en/src/review/v3-cpp
-->

<h1 id="review">Review</h1>
<p>Review 可以帮助你提示用户去评价你的应用</p>
<h2 id="_1">集成</h2>
<p>在您确保正确安装了 SDKBOX installer 的情况下，运行下面的命令来集成 SDKBOX Review 插件。</p>
<pre><code class="bash">$ sdkbox import review
</code></pre>

<h2 id="android">Android 的额外步骤</h2>
<h3 id="yourgamenamejava">修改 <code>&lt;YourGameName&gt;.java</code></h3>
<ul>
<li>修改 <code>proj.android/src/&lt;package identifier&gt;/&lt;YourGameName&gt;.java</code> 文件，导入如下包：</li>
</ul>
<pre><code class="java">import android.content.Intent;
import com.sdkbox.plugin.SDKBox;
</code></pre>

<ul>
<li>然后，修改您的类 <code>onCreate(final Bundle savedInstanceState)</code> 函数，添加一个调用语句 <code>SDKBox.init(this)</code> 。如下：</li>
</ul>
<pre><code class="java">protected void onCreate(Bundle savedInstanceState){
  super.onCreate(savedInstanceState);
  SDKBox.init(this);
}
</code></pre>

<ul>
<li>
<p>最后, 我需要提供合适的 <strong>overrides</strong> 方法的代码。这里有一些约定如下。</p>
<ul>
<li>
<p>如果这个被列出的方法没有在 <code>SDKBox</code> 中定义，那么<strong>定义它</strong>。</p>
</li>
<li>
<p>如果这个被列出的方法已经被定义在 <code>SDKBox</code> 中，那么请调用这个在 <code>SDKBox</code> 中的<strong>同名方法</strong>。</p>
</li>
</ul>
</li>
</ul>
<pre><code class="java">    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
          if(!SDKBox.onActivityResult(requestCode, resultCode, data)) {
            super.onActivityResult(requestCode, resultCode, data);
          }
    }
    @Override
    protected void onStart() {
          super.onStart();
          SDKBox.onStart();
    }
    @Override
    protected void onStop() {
          super.onStop();
          SDKBox.onStop();
    }
    @Override
    protected void onResume() {
          super.onResume();
          SDKBox.onResume();
    }
    @Override
    protected void onPause() {
          super.onPause();
          SDKBox.onPause();
    }
    @Override
    public void onBackPressed() {
          if(!SDKBox.onBackPressed()) {
            super.onBackPressed();
          }
    }
</code></pre>

<h3 id="release">混淆 (release 模式有效, 可选)</h3>
<ul>
<li>编辑 <code>project.properties</code> 指定一个 <code>Proguard</code> 配制文件. 例如:</li>
</ul>
<pre><code>proguard.config=proguard.cfg
</code></pre>

<ul>
<li>编辑这个文件,包含如下内容:</li>
</ul>
<pre><code># If your project uses WebView with JS, uncomment the following
# and specify the fully qualified class name to the JavaScript interface
# class:
#-keepclassmembers class fqcn.of.javascript.interface.for.webview {
#   public *;
#}
</code></pre>

<p><strong>注意:</strong> 混淆只在 <strong>Release</strong> 模式下有效 (例如 <code>cocos run -m release</code>) ,在 debug 模式下不会调用混淆配置文件.</p>
<h2 id="_2">配置</h2>
<p>SDKBOX 安装器会为你自动生成一个配置文件 <code>res/sdkbox_config.json</code>,在你使用前,请修改里面的值为你自己的应用所需的值.</p>
<p>下面给给一个 Review 的配置.</p>
<pre><code class="json">&quot;Review&quot;:{
    &quot;ios&quot;: {
        &quot;Review&quot;:{
            &quot;AppID&quot;:&quot;587767923&quot;,            //appid, ios 上有效
            &quot;DayLimit&quot;: 0,                  //在评价弹出框显示前的天数限制
            &quot;LaunchLimit&quot;: 3,               //在评价弹出框显示前的启动次数限制
            &quot;UserEventLimit&quot;: 0,            //在评价弹出框显示前的用户事件限制, 用户事件是集成应用来增加事件记数的,调用 userDidSignificantEvent 增加用户事件记数
            &quot;DayForReminding&quot;: 1,           //用户选择 稍后提示 后再次弹出的天数限制
            &quot;LaunchForReminding&quot;: 2,        //用户选择 稍后提示 后再次弹出的启动次数限制
            &quot;tryPromptWhenInit&quot;: true       //在初始化后，是否自动弹出评价提示框
        }
    },
    &quot;android&quot;: {
        &quot;Review&quot;:{
            &quot;DayLimit&quot;: 0,
            &quot;LaunchLimit&quot;: 3,
            &quot;UserEventLimit&quot;: 0,
            &quot;DayForReminding&quot;: 1,
            &quot;LaunchForReminding&quot;: 2,
            &quot;tryPromptWhenInit&quot;: true
        }
    }
}
</code></pre>

<h2 id="_3">用法</h2>
<h3 id="javascript">注册 Javascript 函数</h3>
<p>在使用 Review js接口前，你要先把它注册到js环境中.</p>
<p>像这样做:
* 修改 <code>./frameworks/runtime-src/Classes/AppDelegate.cpp</code> 包含如下头文件:</p>
<pre><code class="cpp">#include &quot;PluginReviewJS.hpp&quot;
#include &quot;PluginReviewJSHelper.hpp&quot;
</code></pre>

<ul>
<li>修改 <code>./frameworks/runtime-src/Classes/AppDelegate.cpp</code> 调用如下函数:</li>
</ul>
<pre><code class="cpp">sc-&gt;addRegisterCallback(register_all_PluginReviewJS);
sc-&gt;addRegisterCallback(register_all_PluginReviewJS_helper);
</code></pre>

<h3 id="initialize-review">初始化Initialize Review</h3>
<p>在你的代码中调用 <code>init()</code> 完成初始化.我们建议在 <code>app.js</code> 中初始化.比如:</p>
<pre><code class="javascript">sdkbox.PluginReview.init();
</code></pre>

<h3 id="review_1">设置 Review (可选)</h3>
<p>如果你不要使用默认的提示字串,你可以设置自己的字串</p>
<p><code>注意:</code> 如果你在 <code>sdkbox.config</code> 中把 <code>tryPromptWhenInit</code> 项设置为真,那必须在 <code>init()</code> 之前调用以下函数</p>
<pre><code class="cpp">sdkbox.PluginReview.setCustomPromptTitle(&quot;custom title&quot;);
sdkbox.PluginReview.setCustomPromptMessage(&quot;custom message&quot;);
sdkbox.PluginReview.setCustomPromptCancelButtonTitle(&quot;custom cancel&quot;);
sdkbox.PluginReview.setCustomPromptRateButtonTitle(&quot;custom rate&quot;);
sdkbox.PluginReview.setCustomPromptRateLaterButtonTitle(&quot;custom rate later&quot;);
</code></pre>

<p>如果你的 <code>sdkbox.config</code> 中把 <code>tryPromptWhenInit</code> 项为 false, 那你可以调用 <code>tryToShowPrompt</code> 尝试提示用户评价你的应用,
如果所有的限制条件都满足,那提示框就会显示</p>
<pre><code class="cpp">sdkbox.PluginReview.tryToShowPrompt();
</code></pre>

<p>你也可以强制显示评价提示框</p>
<pre><code class="cpp">sdkbox.PluginReview.forceToShowPrompt();
</code></pre>

<p>如果你的 <code>sdkbox.config</code> 中的 <code>UserEventLimit</code> 项大于0的话，那你需要自已增加用户事件记数</p>
<pre><code class="cpp">sdkbox.PluginReview.userDidSignificantEvent(true);
</code></pre>

<h3 id="review_2">接收 Review 的事件 (可选)</h3>
<p>你可以接收 Review 事件,然后对不同的事件，做不同的处理.一个的简单的用法可能会像这样:</p>
<pre><code class="javascript">var plugin = sdkbox.PluginReview
plugin.setListener({
  didDisplayAlert: function(data) {cc.log(&quot;didDisplayAlert&quot;)},
  didDeclineToRate: function(data) { cc.log(&quot;didDeclineToRate&quot;) },
  didToRate: function(data) { cc.log(&quot;didToRate&quot;) },
  didToRemindLater: function(data) { cc.log(&quot;didToRemindLater&quot;) }
})
plugin.init()
</code></pre>

<h2 id="api-reference">API Reference</h2>
<h3 id="methods">Methods</h3>
<pre><code class="javascript">sdkbox.PluginReview.init();
</code></pre>

<blockquote>
<p>initialize the plugin instance.</p>
</blockquote>
<pre><code class="javascript">sdkbox.PluginReview.setListener(listener);
</code></pre>

<blockquote>
<p>Set listener to listen for adcolony events</p>
</blockquote>
<pre><code class="javascript">sdkbox.PluginReview.getListener();
</code></pre>

<blockquote>
<p>Get the listener</p>
</blockquote>
<pre><code class="javascript">sdkbox.PluginReview.removeListener();
</code></pre>

<blockquote>
<p>Remove the listener, and can't listen to events anymore</p>
</blockquote>
<pre><code class="javascript">sdkbox.PluginReview.tryToShowPrompt();
</code></pre>

<blockquote>
<p>Tells PluginReview to try and show the prompt (a rating alert). The prompt will be showed
  if there is connection available, the user hasn't declined to rate
  or hasn't rated current version.
  if the item <code>tryPromptWhenInit</code> in sdkbox.config is false, you can call this try to show prompt</p>
</blockquote>
<pre><code class="javascript">sdkbox.PluginReview.forceToShowPrompt();
</code></pre>

<blockquote>
<p>Tells PluginReview to show the prompt (a rating alert).
  Similar to tryToShowPrompt, but without checks (the prompt is always displayed).
  Passing false will hide the rate later button on the prompt.</p>
</blockquote>
<p>The case where you should call this is if your app has an
  explicit "Rate this app" command somewhere. This is similar to rateApp,
  but instead of jumping to the review directly, an intermediary prompt is displayed.</p>
<p>another case is for debug</p>
<pre><code class="javascript">sdkbox.PluginReview.userDidSignificantEvent(false);
</code></pre>

<blockquote>
<p>Tells PluginReview that the user performed a significant event. A significant
  event is whatever you want it to be. If you're app is used to make VoIP
  calls, then you might want to call this method whenever the user places
  a call. If it's a game, you might want to call this whenever the user
  beats a level boss.</p>
</blockquote>
<p>If the user has performed enough significant events and used the app enough,
  you can suppress the rating alert by passing NO for canPromptForRating. The
  rating alert will simply be postponed until it is called again with YES for
  canPromptForRating. The rating alert can also be triggered by appLaunched:
  and appEnteredForeground: (as long as you pass YES for canPromptForRating
  in those methods).</p>
<pre><code class="javascript">sdkbox.PluginReview.setCustomPromptTitle(title);
</code></pre>

<blockquote>
<p>Set customized title for alert view.</p>
</blockquote>
<pre><code class="javascript">sdkbox.PluginReview.setCustomPromptMessage(message);
</code></pre>

<blockquote>
<p>Set customized message for alert view.</p>
</blockquote>
<pre><code class="javascript">sdkbox.PluginReview.setCustomPromptCancelButtonTitle(cancelTitle);
</code></pre>

<blockquote>
<p>Set customized cancel button title for alert view.</p>
</blockquote>
<pre><code class="javascript">sdkbox.PluginReview.setCustomPromptRateButtonTitle(rateTitle);
</code></pre>

<blockquote>
<p>Set customized rate button title for alert view.</p>
</blockquote>
<pre><code class="javascript">sdkbox.PluginReview.setCustomPromptRateLaterButtonTitle(rateLaterTitle);
</code></pre>

<blockquote>
<p>Set customized rate later button title for alert view.</p>
</blockquote>
<h3 id="listeners">Listeners</h3>
<pre><code class="javascript">didDisplayAlert();
</code></pre>

<blockquote>
<p>trigger when rate prompt display</p>
</blockquote>
<pre><code class="javascript">didDeclineToRate();
</code></pre>

<blockquote>
<p>trigger when user refuse to rate</p>
</blockquote>
<pre><code class="javascript">didToRate();
</code></pre>

<blockquote>
<p>trigger when user want to rate</p>
</blockquote>
<pre><code class="javascript">didToRemindLater();
</code></pre>

<blockquote>
<p>trigger when user want to remind later</p>
</blockquote>
<h2 id="_4">手动集成</h2>
<p>如果 <em>SDKBOX 安装器</em> 安装插件失败了，那么需要手动集成插件.如果安装器安装插件成功了,那么不需要，也没必要,按文档再手动集成一次.</p>
<p>下面列出的的步骤一般很少用到.如果你按下面的步骤完成了集成，请在完成集成后，再按步骤检查一次.</p>
<h2 id="ios">iOS 手动集成步骤</h2>
<p>把 <strong>plugins/ios</strong> 里的如下的 framework 拖到你的 Xcode 工程里的 <code>Review</code> 项,添加时,把 <code>Copy items if needed</code> 勾选上:</p>
<blockquote>
<p>sdkbox.framework</p>
<p>PluginReview.framework</p>
<p>plugin_review_res_bundle</p>
</blockquote>
<p>把 <code>plugin/jsbindings</code> 文件夹中所有的头文件和源文件都拷贝到你的工程的 <code>Classes</code> 文件夹中.</p>
<p>把刚刚拷贝的文件拖动到 Xcode 中或使用 <strong>File -&gt; Add files to...</strong> 来添加.</p>
<h2 id="android_1">Android 手动集成步骤.</h2>
<h3 id="_5">拷贝文件</h3>
<p>从安装包中的 <code>plugin/android/libs</code> 文件夹下拷贝下面的 <strong>jar</strong> 文件到你的工程中的 <strong>proj.android/libs</strong> 文件夹.</p>
<blockquote>
<p>ReviewLite.jar</p>
<p>PluginReview.jar</p>
<p>sdkbox.jar</p>
</blockquote>
<p>从 <code>plugin/android/jni</code> 拷贝 <code>pluginreview</code> 和 <code>sdkbox</code> 目录到你的工程的 <code>proj.android/jni/</code> 目录.如果 <code>sdkbox</code> 目录已存在，覆盖它.</p>
<p>从 <code>plugin/android</code> 拷贝 <code>plugin_review_res_project</code> 到你工程中的 <code>proj.android</code>,同时让你的工程引用到 <code>plugin_review_res_project</code> 这个工程</p>
<h3 id="androidmanifestxml">编辑 <code>AndroidManifest.xml</code></h3>
<p>在 <strong>application tag</strong> 这个项前面添加如下权限:</p>
<pre><code class="xml">&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;
</code></pre>

<h3 id="androidmk">编辑 <code>Android.mk</code></h3>
<p>在 <code>proj.android/jni/Android.mk</code> 中:</p>
<p>给 <strong>LOCAL_STATIC_LIBRARIES</strong> 添加如下要求:</p>
<pre><code>LOCAL_STATIC_LIBRARIES += android_native_app_glue
LOCAL_LDLIBS += -landroid
LOCAL_LDLIBS += -llog
LOCAL_STATIC_LIBRARIES += PluginReview
LOCAL_STATIC_LIBRARIES += sdkbox
</code></pre>

<p>在所有的 <strong>import-module</strong> 项前，添加如下调用:</p>
<pre><code>$(call import-add-path,$(LOCAL_PATH))
</code></pre>

<p>在所有的 <strong>import-module</strong> 后，新增如下项:</p>
<pre><code>$(call import-module, ./sdkbox)
$(call import-module, ./pluginreview)
</code></pre>

<p>修改后，应该和下面的修改类似:</p>
<pre><code>$(call import-add-path,$(LOCAL_PATH))
$(call import-module, ./sdkbox)
$(call import-module, ./pluginreview)
</code></pre>

<h3 id="aplicationmk">编辑 <code>Aplication.mk</code></h3>
<p>在 <code>proj.android/jni/Application.mk</code> 中:</p>
<p>添加 <strong>APP_PATFORM</strong> 的版本要求:</p>
<pre><code>APP_PLATFORM := android-9
</code></pre>

<p>把 <code>plugin/jsbindings</code> 文件夹中所有的头文件和源文件都拷贝到你的工程的 <code>Classes</code> 文件夹中.</p>
<p>把你刚刚拷贝的 <code>.cpp</code> 文件添加到 <code>Android.mk</code> 文件的的 <strong>LOCAL_SRC_FILES</strong> 项.比如</p>
<pre><code>LOCAL_SRC_FILES := hellocpp/main.cpp \
                  ../../Classes/AppDelegate.cpp \
                  ../../Classes/HelloWorldScene.cpp \
                                    ../../Classes/NewSourceFile.cpp
</code></pre></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../../../js/jquery-1.10.2.min.js"></script>
        <script src="../../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../../js/highlight.pack.js"></script>
        <script>var base_url = '../../..';</script>
        <script src="../../../js/base.js"></script>


    </body>
</html>
